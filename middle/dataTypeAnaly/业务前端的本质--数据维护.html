<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>少逸前端文档 ！</title><meta name="description" content="这是markdown文档整理站点">
    <link rel="preload" href="/vuepress/assets/style-1746bcbf.css" as="style"><link rel="stylesheet" href="/vuepress/assets/style-1746bcbf.css">
    <link rel="modulepreload" href="/vuepress/assets/app-fdef3a24.js"><link rel="modulepreload" href="/vuepress/assets/业务前端的本质--数据维护.html-36a41bc2.js"><link rel="modulepreload" href="/vuepress/assets/业务前端的本质--数据维护.html-1de77d9d.js"><link rel="prefetch" href="/vuepress/assets/index.html-afad25e3.js" as="script"><link rel="prefetch" href="/vuepress/assets/TaskList.html-5fa9d6d8.js" as="script"><link rel="prefetch" href="/vuepress/assets/css_examples.html-78d10d52.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-380facc4.js" as="script"><link rel="prefetch" href="/vuepress/assets/337学习法.html-dce34102.js" as="script"><link rel="prefetch" href="/vuepress/assets/Markdown语法.html-9f0d4c7b.js" as="script"><link rel="prefetch" href="/vuepress/assets/bookmark.html-8c455417.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-e70352af.js" as="script"><link rel="prefetch" href="/vuepress/assets/可铺助面试问题.html-53bf8e92.js" as="script"><link rel="prefetch" href="/vuepress/assets/后台示例系统.html-d2dab20b.js" as="script"><link rel="prefetch" href="/vuepress/assets/HTML标签.html-9477ff3c.js" as="script"><link rel="prefetch" href="/vuepress/assets/HTML页面渲染流程.html-a66186d5.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-aa456010.js" as="script"><link rel="prefetch" href="/vuepress/assets/one.html-f74dc7bd.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-d87555b6.js" as="script"><link rel="prefetch" href="/vuepress/assets/two.html-6c3077e9.js" as="script"><link rel="prefetch" href="/vuepress/assets/bookmark.html-375d68e2.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-8782999e.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-aee22858.js" as="script"><link rel="prefetch" href="/vuepress/assets/Vue2使用易误用收集.html-920c1aec.js" as="script"><link rel="prefetch" href="/vuepress/assets/Vue双向绑定Proxy.html-a5aaf762.js" as="script"><link rel="prefetch" href="/vuepress/assets/Vue数据更新问题.html-6fb9fcba.js" as="script"><link rel="prefetch" href="/vuepress/assets/vue3知识点链接.html-f69692e1.js" as="script"><link rel="prefetch" href="/vuepress/assets/vue模糊的知识.html-17ce74a1.js" as="script"><link rel="prefetch" href="/vuepress/assets/cssDemo1.html-103ea961.js" as="script"><link rel="prefetch" href="/vuepress/assets/css_页面上隐藏元素的方法.html-4f3f1742.js" as="script"><link rel="prefetch" href="/vuepress/assets/bfc块级格式化上下文.html-c6508b5d.js" as="script"><link rel="prefetch" href="/vuepress/assets/三栏布局.html-8b93372b.js" as="script"><link rel="prefetch" href="/vuepress/assets/sass入门常用.html-72a5d96d.js" as="script"><link rel="prefetch" href="/vuepress/assets/css_16种方法实现水平居中垂直居中.html-ec12abf0.js" as="script"><link rel="prefetch" href="/vuepress/assets/ts_example.html-5edb49d4.js" as="script"><link rel="prefetch" href="/vuepress/assets/ts_study.html-8d45db43.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-9fc60820.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-f7de46eb.js" as="script"><link rel="prefetch" href="/vuepress/assets/tidbCreateData.html-dc7e7f1f.js" as="script"><link rel="prefetch" href="/vuepress/assets/git常用命令.html-bd183499.js" as="script"><link rel="prefetch" href="/vuepress/assets/git提交规范.html-46b4bfdf.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-5b2e12e7.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode setting文件配置.html-42780328.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode添加ESLint代码风格检查.html-87408eb2.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode添加Prettier代码格式化.html-f5e21f15.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode添加sonar代码扫描安装.html-3f89775c.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode添加自定义注释.html-c5c04e42.js" as="script"><link rel="prefetch" href="/vuepress/assets/vscode如何进行代码注释定制（koroFileHeader）.html-7f4de2e2.js" as="script"><link rel="prefetch" href="/vuepress/assets/【前端工程化】代码规范.html-87ae6c3f.js" as="script"><link rel="prefetch" href="/vuepress/assets/Flexbox.html-4611a68b.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-879fd31c.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-cb2ab0f5.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-91442bcd.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-8f0f6046.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-8ca5a397.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-6b96aa87.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-b4703dfe.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-aec91714.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-264859e6.js" as="script"><link rel="prefetch" href="/vuepress/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-d048f4ca.js" as="script"><link rel="prefetch" href="/vuepress/assets/TaskList.html-69037dc8.js" as="script"><link rel="prefetch" href="/vuepress/assets/css_examples.html-f27b64fb.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-fe0d7840.js" as="script"><link rel="prefetch" href="/vuepress/assets/337学习法.html-eb545488.js" as="script"><link rel="prefetch" href="/vuepress/assets/Markdown语法.html-16ce6de5.js" as="script"><link rel="prefetch" href="/vuepress/assets/bookmark.html-c4ed6a9d.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-380a30f7.js" as="script"><link rel="prefetch" href="/vuepress/assets/可铺助面试问题.html-28d528c3.js" as="script"><link rel="prefetch" href="/vuepress/assets/后台示例系统.html-133f0e06.js" as="script"><link rel="prefetch" href="/vuepress/assets/HTML标签.html-413392dc.js" as="script"><link rel="prefetch" href="/vuepress/assets/HTML页面渲染流程.html-7e20802b.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-06c6df6a.js" as="script"><link rel="prefetch" href="/vuepress/assets/one.html-5dd44a99.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-31d74b1f.js" as="script"><link rel="prefetch" href="/vuepress/assets/two.html-3a6594ec.js" as="script"><link rel="prefetch" href="/vuepress/assets/bookmark.html-9cc511c0.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-85b275a2.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-6f946938.js" as="script"><link rel="prefetch" href="/vuepress/assets/Vue2使用易误用收集.html-fdff472a.js" as="script"><link rel="prefetch" href="/vuepress/assets/Vue双向绑定Proxy.html-8481f234.js" as="script"><link rel="prefetch" href="/vuepress/assets/Vue数据更新问题.html-c16de909.js" as="script"><link rel="prefetch" href="/vuepress/assets/vue3知识点链接.html-d7f8d80f.js" as="script"><link rel="prefetch" href="/vuepress/assets/vue模糊的知识.html-c4b258bd.js" as="script"><link rel="prefetch" href="/vuepress/assets/cssDemo1.html-f7786a06.js" as="script"><link rel="prefetch" href="/vuepress/assets/css_页面上隐藏元素的方法.html-a0d4e278.js" as="script"><link rel="prefetch" href="/vuepress/assets/bfc块级格式化上下文.html-3802a493.js" as="script"><link rel="prefetch" href="/vuepress/assets/三栏布局.html-1c451289.js" as="script"><link rel="prefetch" href="/vuepress/assets/sass入门常用.html-da66fe62.js" as="script"><link rel="prefetch" href="/vuepress/assets/css_16种方法实现水平居中垂直居中.html-e8c3a0a6.js" as="script"><link rel="prefetch" href="/vuepress/assets/ts_example.html-3cfd5b6f.js" as="script"><link rel="prefetch" href="/vuepress/assets/ts_study.html-5986bc8a.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-5c21e9cf.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-fd9bdcfb.js" as="script"><link rel="prefetch" href="/vuepress/assets/tidbCreateData.html-ed6b533e.js" as="script"><link rel="prefetch" href="/vuepress/assets/git常用命令.html-684593ed.js" as="script"><link rel="prefetch" href="/vuepress/assets/git提交规范.html-6d8ccf0c.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-c5c7f299.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode setting文件配置.html-c96c9718.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode添加ESLint代码风格检查.html-ac794ea1.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode添加Prettier代码格式化.html-63b9c37e.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode添加sonar代码扫描安装.html-5ce68637.js" as="script"><link rel="prefetch" href="/vuepress/assets/VSCode添加自定义注释.html-41b495ed.js" as="script"><link rel="prefetch" href="/vuepress/assets/vscode如何进行代码注释定制（koroFileHeader）.html-f53d5eab.js" as="script"><link rel="prefetch" href="/vuepress/assets/【前端工程化】代码规范.html-04ac40ae.js" as="script"><link rel="prefetch" href="/vuepress/assets/Flexbox.html-42636dcc.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-d5dea7e5.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-68cbded0.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-042b82ec.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-26723a56.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-2c2683b4.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-87d360ea.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-37ce3c7f.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-792855f0.js" as="script"><link rel="prefetch" href="/vuepress/assets/index.html-44940a04.js" as="script"><link rel="prefetch" href="/vuepress/assets/404.html-bca00424.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vuepress/" class=""><!----><span class="site-name">少逸前端文档 ！</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/vuepress/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/javascript/" class="" aria-label="JAVASCRIPT"><!--[--><!--]--> JAVASCRIPT <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/css/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/html/" class="" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/middle/" class="router-link-active" aria-label="工程化"><!--[--><!--]--> 工程化 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/helpDoc/bookmark.html" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/vuepress/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/javascript/" class="" aria-label="JAVASCRIPT"><!--[--><!--]--> JAVASCRIPT <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/css/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/html/" class="" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/middle/" class="router-link-active" aria-label="工程化"><!--[--><!--]--> 工程化 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress/helpDoc/bookmark.html" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/vuepress/javascript/" class="sidebar-item sidebar-heading" aria-label="JAVASCRIPT"><!--[--><!--]--> JAVASCRIPT <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="external-link sidebar-item" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><li><a href="/vuepress/foo/bar.md" class="sidebar-item" aria-label="/foo/bar.md"><!--[--><!--]--> /foo/bar.md <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/vuepress/bar/README.md" class="sidebar-item sidebar-heading" aria-label="/bar/README.md"><!--[--><!--]--> /bar/README.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="一、数据" tabindex="-1"><a class="header-anchor" href="#一、数据" aria-hidden="true">#</a> 一、数据</h2><p>数据主要有两大类，<strong>ui 相关</strong>和<strong>非 ui 相关</strong>。 <img src="/vuepress/assets/640-f8182ff8.webp" alt=""></p><h3 id="_1、ui-相关" tabindex="-1"><a class="header-anchor" href="#_1、ui-相关" aria-hidden="true">#</a> 1、ui 相关 -----</h3><p>前端本质上就是将数据可视化，因此定义的变量中一部分就是供页面展示使用的，在 Vue 中会把这些数据定义在 data 中变为响应式，在 React 中会调用 <code>SetState</code> 来更新这些变量以便更新视图。</p><h4 id="_1-1-前端自闭环-一" tabindex="-1"><a class="header-anchor" href="#_1-1-前端自闭环-一" aria-hidden="true">#</a> 1.1 前端自闭环 一</h4><p>些变量仅在前端记录进行 ui 的更新，后端不会感知到。 比如页面的 loading 态、 点击态、是否打开展示更多</p><h4 id="_1-2-来自后端" tabindex="-1"><a class="header-anchor" href="#_1-2-来自后端" aria-hidden="true">#</a> 1.2. 来自后端</h4><p>页面数据是存在数据库中，后端会把这些数据给前端，供前端展示，这类数据又分为两种：</p><ul><li>将数据直接赋值给某个前端变量进行展示，比如昵称、标题等。</li><li>将数据转换后再进行展示，比如钱相关字段因为精度问题，后端存储的是分，给到前端以后需要转换成元进行展示。</li></ul><h4 id="_1-3-来自底层" tabindex="-1"><a class="header-anchor" href="#_1-3-来自底层" aria-hidden="true">#</a> 1.3.来自底层</h4><p>设备信息：通过屏幕宽高来设置弹窗的宽高。</p><p>localStorage：一些模块可能一天只需要展示一次，前端将标志存到 localStorage 中自行进行判断。</p><h3 id="_2、非-ui-相关" tabindex="-1"><a class="header-anchor" href="#_2、非-ui-相关" aria-hidden="true">#</a> 2、非 ui 相关 -------</h3><p>这些变量和 ui 无关也不会和页面后端交互，举几个例子：</p><h4 id="_2-1-前端自闭环" tabindex="-1"><a class="header-anchor" href="#_2-1-前端自闭环" aria-hidden="true">#</a> 2.1.前端自闭环</h4><p>请求锁：一些提交请求，为了防止用户多次提交，可以在接口请求前设置一个标志位，类似于下边这样。</p><div class="language-// line-numbers-mode" data-ext="//"><pre class="language-//"><code>let isSubmitting = false;      
// 模拟一个异步请求    
function sendRequest() {
	return new Promise((resolve, reject) =&gt; {       
		setTimeout(() =&gt; {         
			resolve(&quot;请求成功&quot;);        }, 2000); // 模拟2秒的请求时间    
    	});   
}      // 处理按钮点击事件   

function handleSubmit() {     // 检查标志位     
     if (isSubmitting) {       
     console.log(&quot;请求正在进行中，请稍后...&quot;);      
     return;     
	}        // 设置标志位     
	isSubmitting = true;     
    console.log(&quot;开始请求...&quot;);        
    // 发送请求    
    sendRequest().then(response =&gt; {      
    	console.log(response);     
    }).catch(error =&gt; {     
         console.error(error);     
    }).finally(() =&gt; {    
    	// 请求完成后重置标志位       
    	isSubmitting = false;      
    	console.log(&quot;请求完成，可以再次提交&quot;);    
    });  
 }   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>埋点数据：模块曝光或者用户点击的时候进行埋点，相关数据会提前存到一个对象中。 定时器引用：页面中创建定时器后用一个变量保存定时器实例，用户可能离开页面的时候还未执行到定时器，因此需要在离开页面的时候进行清除。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Page({    
	data: {     
		// 其他数据    
	},        
	// 用于保存定时器实例的变量    
	timer: null,       // 页面加载时创建定时器   
	onLoad: function() {    
		this.createTimer();    
	},       // 创建定时器的方法    
	createTimer: function() {    
		this.timer = setTimeout(() =&gt; {    
		console.log(&#39;定时器执行中...&#39;);     }, 5000); // 5秒后执行   
	},       // 页面卸载时清除定时器   
	onUnload: function() {    
		this.clearTimer();    
	},       // 清除定时器的方法    
	clearTimer: function() {   
		if (this.timer) {     
			clearTimeout(this.timer);      
			console.log(&#39;页面即将卸载，定时器已清除&#39;);    
		}    
	},       
	// 其他页面方法和事件处理函数 
});   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-来自后端" tabindex="-1"><a class="header-anchor" href="#_2-2-来自后端" aria-hidden="true">#</a> 2.2 来自后端</h4><p>埋点数据：模块曝光或者用户点击的时候进行埋点，一些数据会由后端给到。</p><h4 id="_2-3-来自底层" tabindex="-1"><a class="header-anchor" href="#_2-3-来自底层" aria-hidden="true">#</a> 2.3 来自底层</h4><p>localStorage：比如存储用户的点击次数，进行相应的限频。</p><h2 id="二、引起数据的变化" tabindex="-1"><a class="header-anchor" href="#二、引起数据的变化" aria-hidden="true">#</a> 二、引起数据的变化</h2><p>数据变化的根源就是<strong>用户操作</strong>，用户的操作可能直接引起数据变化，也可能触发某些全局事件或者定时器，又触发新一轮的页面数据变化。 <img src="/vuepress/assets/641-023378c8.webp" alt=""></p><h3 id="_1-用户操作" tabindex="-1"><a class="header-anchor" href="#_1-用户操作" aria-hidden="true">#</a> 1.用户操作</h3><p>大部分的数据变化都是由于用户的操作，比如点击、滑动。 根据点击的位置不同，可能触发不同的动作。比如去请求后端接口拿数据、进入新页面、离开当前页面，在小程序中会触发 <code>onHide</code> 、<code>onShow</code> 生命周期，在这些周期中会做一些动作更新数据。 还有经常遇到的表单逆向操作，当用户依次填了 A 项、B 项、C 项，由于 B、C 依赖于 A 项的选择，当用户再修改 A 项的时候需要清空 B、C 之前的选择。</p><h4 id="_2-监听数据变化" tabindex="-1"><a class="header-anchor" href="#_2-监听数据变化" aria-hidden="true">#</a> 2.监听数据变化</h4><p>在 <code>Vue</code> 中通过 <code>watch</code> 监听变量，在 <code>React</code> 中通过 <code>useEffect</code> 监听变量。一般情况监听的是组件的 prop，当父组件变化时，子组件进行相应的更新。</p><h4 id="_3-定时器" tabindex="-1"><a class="header-anchor" href="#_3-定时器" aria-hidden="true">#</a> 3.定时器</h4><p>定时器时间结束后，会触发定时器注册的回调函数。 常用于页面上的倒计时的更新。也用于解决 ui 更新的时序问题，直接给 setTimeout 事件设置为 0，让回调函数到下一个宏任务周期去执行。</p><h4 id="_4-全局事件" tabindex="-1"><a class="header-anchor" href="#_4-全局事件" aria-hidden="true">#</a> 4.全局事件</h4><p>主要用于跨模块之间的通信，常用的比如 eventbus、vuex、redux 等。 常见的比如全局的登录事件，各个页面需要监听登录成功才去触发后续的业务逻辑。</p><h3 id="三、关联" tabindex="-1"><a class="header-anchor" href="#三、关联" aria-hidden="true">#</a> 三、关联</h3><p>理想状态，用户动作 =&gt; 更新数据 =&gt; 页面自动更新。 <img src="/vuepress/assets/642-288b21f9.webp" alt=""> 但实际上，当数据变化的时候，由于全局事件、定时器的存在，还会继续触发新一轮的数据更新。 此外，数据变化每次也不止变更一个数据，数据之间又会有相应的联动关系。 <img src="/vuepress/assets/643-60d35591.webp" alt=""></p><p>这也是为什么框架都在倡导单一数据流的原因，全局事件第一个人用起来会很方便，但在一个上百人的前端项目中，后续页面继续迭代或者重构的时候，漏改或者影响面评估错误的风险也会增高。</p><p>当增加一个数据变量的时候也要考虑清楚，是否有必要新增，因为每增一个都会增加页面的内部复杂度。当然有时候也不是变量越少越好，当各个地方共用一个变量，也意味着这个变量赋予了多重含义，有悖「单一职责」。</p><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><p>业务前端看起来简单，就是维护一些数据。但当页面数据变量越来越多，交互越来越多，数据更新会变得错综复杂，后续迭代的心智负担会越来越重。</p><p>此时能做的就是明确<strong>当前数据（ui/非 ui 数据）有什么，引起数据的变化有什么（用户动作、数据之间的关联等）</strong>，这些理清之后出现 bug 的概率也会极大降低。</p><p>最根本的还是降低函数和函数之间、模块与模块之间的依赖关系，也就是常说的高内聚、低耦合，保证后续改动的影响面足够小且明确。</p><p>最终看到的页面不再是页面，而是数据的变化和流动。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: yuzhoufen@foresee.com.cn">yuzhoufen</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/vuepress/assets/app-fdef3a24.js" defer></script>
  </body>
</html>
